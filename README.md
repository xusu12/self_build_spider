## 自己整理的爬虫小项目

### 1.百度地图搜索结果爬虫
1. 根据百度地图的API,在area.txt中写入自己所需要的城市信息(全国的城市信息在city-ids.txt中)

2. 输入自己需要的POI名称，比如 书店，银行等等，可以一次搜索这个城市多个POI信息

### 2.多任务实现的亚马逊bsr数据爬虫
工作之余写的小项目  主要是锻炼多任务、分布式爬虫的开发

1. 项目采用生产者-消费者模型，以redis作为缓存中介，项目分为生产者程序、爬虫程序、日志模块和配置文件模块

2. 项目的运行环境、数据库配置、多任务数、日志信息等都写在配置文件中

3. 项目运行的过程会记录日志信息，放在log文件夹的目录下

4. 项目采用多任务爬取数据，这里写了多个版本，有协程池、线程池、多线程等

5. 在多任务爬取的过程中，数据是直接写入数据库的，但是多线程操作数据库可能产生资源竞争的问题，所以在写入数据的时候需要加上互斥锁

爬虫程序可以运行在不同主机上，只要从相同的redis中获取请求数据，就可以实现分布式爬虫

### 3.豆瓣电影爬虫
爬取豆瓣电影250的信息  使用celery异步任务下载电影的图片

### 4.爬取Google商店中各类app的信息
1. 获取app的排名、分类、评论量、热度等信息。通过获取的数据分析各类app的受欢迎程度。

2. 爬取app列表页面，页面是滚动到底部通过ajax异步请求自动加载下一页的信息，url不变，请求的方式是POST，每次携带请求体参数来获取不同页面的信息。所以获取页面信息通过组织参数发送的ajax请求获取到的

3. app列表页是通到ajax请求获取到的信息，需要通过正则来提取有用的信息。

4. app的详情页信息是通过url请求的完整的页面，提取信息使用的是xpath。

5. 获取到app图片的url，使用了celery异步任务队列来下载图片，不会影响爬虫程序的运行


### 5.破解虎嗅网注册的极验滑动验证码
1. 先进入注册的页面  将鼠标移动到滑块的位置  就会出现验证码的图片  此时页面的代码中会有两张图片  一张是完整的  一张是有缺口的图片是隐藏状态
2. 通过程序提取这两张图片  这两张图片是被切割成52个小块  然后再拼接成的  所以获取图片之后  还要根据位置信息  重新拼接完整的图片
3. 比较两张图片  计算出缺口的位置信息
4. 点击滑块开始移动到缺口的位置  移动的过程不能是匀速的  在离缺口较远的位置  速度要快一点并且要有波动  在接近缺口位置的时候  要放慢速度
5. 如果一次滑动没有成功  那么就重试

注意：操作不是每次都可以成功  如果一次不成功  可以重启程序多试几次

**动图演示效果**

![1542728658302](./slide_captcha/1542728658302.gif)

#### 6.今日头条图片板块爬虫
1. 爬取今日头条'图片'板块的数据，使用scrapy配合selenium进行爬取
2. 页面上的数据是通过ajax动态加载的，所以需要请求动态的url才能获取数据。
3. 头条的url会包含a_s、c_p、_signature三个参数，这三个都是通过js的算法生成的，前两个参数可以通过ascp.getHoney()方法生成，_signature参数是通过TAC.sign(0)方法生成
4. 我们通过selenium加载整个页面，然后通过driver.execute_script来执行相对应的js代码，就可以拿到我们需要的参数，从而构建参发送请求

#### 7.有道翻译爬虫
1. 模拟有道翻译的小程序
2. 翻译的请求是POST方式携带参数。
3. 主要携带的参数是翻译的内容、当前的时间戳、sign签证参数
4. 而sign是由前两个参数再拼接两个特殊的字符串  再使用md5加密算法加密生成的
5. 这样几个参数组织完成后  就可以发送翻译请求了
